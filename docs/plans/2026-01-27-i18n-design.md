# Lingo Journey 國際化 (i18n) 設計文件

> 建立日期：2026-01-27

## 概述

為 Lingo Journey App 實作完整的國際化支援，讓 App 介面能根據使用者偏好顯示對應語言。

## 設計決策

| 項目 | 決策 |
|------|------|
| 預設語言 | 跟隨系統，可在 App 內覆蓋 |
| 支援語言 | 9 種（繁中、簡中、英、日、韓、西、法、德、葡） |
| 技術方案 | Apple String Catalogs (.xcstrings) |
| 儲存方式 | @AppStorage (UserDefaults) |
| 生效方式 | 即時生效 |

## 支援語言清單

| 代碼 | 語言 | 原生名稱 |
|------|------|---------|
| zh-Hant | 繁體中文 | 繁體中文 |
| zh-Hans | 簡體中文 | 简体中文 |
| en | 英文 | English |
| ja | 日文 | 日本語 |
| ko | 韓文 | 한국어 |
| es | 西班牙文 | Español |
| fr | 法文 | Français |
| de | 德文 | Deutsch |
| pt | 葡萄牙文 | Português |

## 架構設計

### 檔案結構

```
lingo_journey/
├── Resources/
│   └── Localizable.xcstrings      # String Catalog（所有 9 種語言）
├── Core/
│   └── Services/
│       └── LanguageManager.swift   # 語言管理器（@Observable）
└── Features/
    └── Settings/
        └── LanguageSettingsView.swift  # 語言選擇 UI
```

### LanguageManager

```swift
@Observable
final class LanguageManager {
    static let shared = LanguageManager()

    enum AppLanguage: String, CaseIterable {
        case system = "system"           // 跟隨系統
        case zhHant = "zh-Hant"          // 繁體中文
        case zhHans = "zh-Hans"          // 簡體中文
        case en = "en"                   // 英文
        case ja = "ja"                   // 日文
        case ko = "ko"                   // 韓文
        case es = "es"                   // 西班牙文
        case fr = "fr"                   // 法文
        case de = "de"                   // 德文
        case pt = "pt"                   // 葡萄牙文
    }

    @AppStorage("appLanguage")
    var selectedLanguage: String = AppLanguage.system.rawValue

    var currentLocale: Locale { ... }

    func displayName(for language: AppLanguage) -> String { ... }
}
```

### 字串 Key 命名規則

採用 `模組.功能.描述` 的命名方式：

| 分類 | Key | 繁體中文 | 英文 |
|------|-----|---------|------|
| **Tab Bar** | tab.translate | 翻譯 | Translate |
| | tab.voice | 語音 | Voice |
| | tab.history | 歷史 | History |
| | tab.settings | 設定 | Settings |
| **Translation** | translation.title | 翻譯 | Translate |
| | translation.inputPlaceholder | 輸入要翻譯的文字 | Enter text to translate |
| | translation.swap | 交換語言 | Swap languages |
| **Settings** | settings.title | 設定 | Settings |
| | settings.language | 語言 | Language |
| | settings.appLanguage | App 語言 | App Language |
| | settings.followSystem | 跟隨系統 | Follow System |
| **Onboarding** | onboarding.title1 | 自信地翻譯 | Translate With Confidence |
| | onboarding.skip | 略過 | Skip |
| | onboarding.next | 下一步 | Next |
| | onboarding.getStarted | 開始使用 | Get Started |

## UI 設計

### 語言設定入口（SettingsView）

```swift
Section {
    NavigationLink {
        LanguageSettingsView()
    } label: {
        HStack {
            Label("App 語言", systemImage: "globe")
            Spacer()
            Text(languageManager.currentLanguageDisplayName)
                .foregroundStyle(.secondary)
        }
    }
} header: {
    Text("語言")
}
```

### LanguageSettingsView

- 列表顯示所有可選語言
- 第一項為「跟隨系統」
- 每個語言以原生名稱顯示
- 選擇後立即生效

## 實作步驟

### Phase 1：基礎架構
1. 建立 `LanguageManager.swift`
2. 在 `lingo_journeyApp.swift` 注入 locale 環境
3. 建立 `Localizable.xcstrings` 檔案

### Phase 2：字串外部化
4. 掃描所有硬編碼文字，替換為 `String(localized:)` 或 `LocalizedStringKey`
5. 統一現有中英混雜的文字

### Phase 3：翻譯
6. 完成 9 種語言的翻譯內容
7. 審核並調整翻譯品質

### Phase 4：UI 整合
8. 建立 `LanguageSettingsView.swift`
9. 整合到 `SettingsView`
10. 測試即時切換功能

## 技術注意事項

1. **即時切換實作**：透過 `.environment(\.locale, ...)` 注入，配合 `@Observable` 的 LanguageManager，當語言變更時 SwiftUI 會自動重新渲染

2. **String Catalogs**：Xcode 15+ 的 `.xcstrings` 格式，支援視覺化編輯和自動偵測新字串

3. **向下相容**：若需支援 iOS 16 以下，需改用傳統 `.strings` 檔案
